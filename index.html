<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPS Tracking Website</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        #tracker { margin-top: 20px; }
        ul { list-style-type: none; padding: 0; }
        li { background: #f4f4f4; margin: 5px 0; padding: 10px; border-radius: 5px; }
        #map { height: 400px; width: 100%; margin-top: 20px; }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY"></script>
</head>
<body>
    <h1>GPS Tracking Site</h1>
    <form id="addForm">
        <input type="text" id="itemName" placeholder="Device/Item Name (e.g., My Car)" required>
        <input type="number" step="any" id="lat" placeholder="Latitude (e.g., 37.7749)" required>
        <input type="number" step="any" id="lng" placeholder="Longitude (e.g., -122.4194)" required>
        <input type="text" id="deviceId" placeholder="Device ID (optional)">
        <button type="submit">Add Location</button>
    </form>
    <div id="tracker">
        <h2>Tracked Locations</h2>
        <ul id="itemList"></ul>
    </div>
    <div id="map"></div>

    <script>
        let map;
        let markers = [];
        let items = JSON.parse(localStorage.getItem('trackedItems')) || [];

        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: 0, lng: 0 },
                zoom: 2
            });
            renderItems();
        }

        function renderItems() {
            markers.forEach(marker => marker.setMap(null));
            markers = [];
            itemList.innerHTML = '';

            items.forEach((item, index) => {
                const li = document.createElement('li');
                li.textContent = `${item.name}: Lat ${item.lat}, Lng ${item.lng}`;
                if (item.deviceId) li.textContent += ` (ID: ${item.deviceId})`;

                const marker = new google.maps.Marker({
                    position: { lat: parseFloat(item.lat), lng: parseFloat(item.lng) },
                    map: map,
                    title: item.name
                });
                markers.push(marker);

                const deleteBtn = document.createElement('button');
                deleteBtn.textContent = 'Delete';
                deleteBtn.onclick = () => {
                    items.splice(index, 1);
                    localStorage.setItem('trackedItems', JSON.stringify(items));
                    renderItems();
                };
                li.appendChild(deleteBtn);
                itemList.appendChild(li);
            });
        }

        document.getElementById('addForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('itemName').value;
            const lat = document.getElementById('lat').value;
            const lng = document.getElementById('lng').value;
            const deviceId = document.getElementById('deviceId').value;
            items.push({ name, lat, lng, deviceId });
            localStorage.setItem('trackedItems', JSON.stringify(items));
            renderItems();
            document.getElementById('addForm').reset();
        });

        window.onload = initMap;
    </script>
</body>
</html>
